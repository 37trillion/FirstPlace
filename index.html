<!DOCTYPE html>
<html>
<head>
    <title>First Place Token</title>
    <style>
        #price-ticker {
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>First Place Token</h1>
    <p>Description of the coin and mission: [Insert description here]</p>
    <div id="price-ticker">Loading price...</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.5.0/web3.min.js"></script>
    <script>
        // Check if Web3 is already injected by MetaMask
        if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        } else {
            // If not, fallback to localhost provider
            web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));
        }

        const contractAddress = '0x69D7F6880aeDCDD4b98D71e9008B310B0DfE4aa9';

        // Initialize contract instance
        const contract = new web3.eth.Contract(ABI, contractAddress);

        // Get the current price from QuickSwap.exchange
        async function getPrice() {
            const response = await fetch('https://api.quickswap.exchange/token_price/0x69D7F6880aeDCDD4b98D71e9008B310B0DfE4aa9');
            const data = await response.json();
            const price = data.price;

            // Display the price ticker
            document.getElementById('price-ticker').textContent = `Price: $${price}`;
        }

        // Connect to MetaMask
        async function connectToMetaMask() {
            try {
                // Request accounts from MetaMask
                const accounts = await ethereum.request({ method: 'eth_requestAccounts' });

                // Set the current account as the default account
                web3.eth.defaultAccount = accounts[0];

                console.log('Connected to MetaMask:', accounts[0]);
            } catch (error) {
                console.error(error);
            }
        }

        // Call the functions after the DOM has loaded
        document.addEventListener('DOMContentLoaded', async () => {
            await connectToMetaMask();
            await getPrice();
        });
    </script>
</body>
</html>
